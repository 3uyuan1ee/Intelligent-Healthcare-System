# 项目架构说明

## 📁 目录结构详解

### 根目录
```
Intelligent-Healthcare-System/
├── 📄 README.md              # 项目主文档
├── 📄 LICENSE                # MIT 开源协议
├── 📄 CONTRIBUTING.md        # 贡献指南
├── 📄 CLAUDE.md              # 开发者指南
├── 📄 CMakeLists.txt         # CMake 构建配置
├── 📄 main.cpp               # 应用程序入口
├── 📄 Standard.h             # 通用头文件包含
├── 📄 resources.qrc          # Qt 资源文件
├── 📄 .gitignore             # Git 忽略文件
├── 📁 docs/                  # 项目文档
├── 📁 scripts/               # 构建和部署脚本
├── 📁 assets/                # 项目资源文件
├── 📁 Server/                # 服务器端代码
├── 📁 Client/                # 客户端界面模块
├── 📁 NetWork/               # 网络通信模块
├── 📁 Instance/              # 实例管理模块
├── 📁 Fun/                   # 功能工具模块
├── 📁 infoClient/            # 信息管理客户端
├── 📁 appointClient/         # 预约管理客户端
├── 📁 caseClient/            # 病例管理客户端
├── 📁 adviceClient/          # 处方管理客户端
├── 📁 checkInClient/         # 签到管理客户端
├── 📁 QuestionClient/        # 问卷管理客户端
├── 📁 Notice/                # 通知系统模块
├── 📁 Cache/                 # 本地缓存目录
└── 📁 build/                 # 构建输出目录
```

### 🎯 模块职责说明

#### 1. Server/ - 服务器端
- **server.cpp**: 主服务器程序，基于 Boost.Asio 的 TCP 服务器
- **功能**: 处理客户端连接、数据库操作、业务逻辑处理
- **依赖**: Boost.Asio, MySQL, nlohmann/json

#### 2. Client/ - 客户端界面
- **patient_client**: 患者端界面和功能
- **doctor_client**: 医生端界面和功能  
- **admin_client**: 管理员端界面和功能
- **职责**: 提供用户交互界面，调用业务逻辑

#### 3. NetWork/ - 网络通信
- **tcpclient**: TCP 客户端实现（单例模式）
- **职责**: 管理网络连接，发送接收 JSON 消息
- **特点**: 线程安全，自动重连，错误处理

#### 4. Instance/ - 实例管理
- **UserSession**: 用户会话管理（单例模式）
- **StateManager**: 应用程序状态管理
- **职责**: 管理用户登录状态，应用级状态控制

#### 5. Fun/ - 功能工具
- **JsonMessageBuilder**: JSON 消息构建工具
- **DataManager**: 数据管理和解析
- **function**: 通用工具函数
- **职责**: 提供可复用的功能模块

#### 6. 业务模块
每个业务模块负责特定的医疗业务功能：

##### infoClient/ - 信息管理
- 患者信息管理
- 医生信息管理
- 用户信息查看和编辑

##### appointClient/ - 预约管理  
- 预约挂号功能
- 预约查询和取消
- 医生排班管理

##### caseClient/ - 病例管理
- 病例录入和编辑
- 病例查询和统计
- 病历模板管理

##### adviceClient/ - 处方管理
- 处方开具和管理
- 药品信息维护
- 治疗方案管理

##### checkInClient/ - 签到管理
- 患者签到功能
- 医生接诊管理
- 签到统计分析

##### QuestionClient/ - 问卷管理
- 健康问卷调查
- 问卷结果分析
- 健康评估

##### Notice/ - 通知系统
- 系统通知发布
- 消息推送功能
- 通知历史管理

### 🔄 数据流向

```
用户界面 → 业务模块 → 网络层 → 服务器 → 数据库
    ↓          ↓         ↓        ↓        ↓
界面更新 ← 数据处理 ← 消息解析 ← 业务逻辑 ← 数据查询
```

### 🏗️ 设计模式应用

#### 1. 单例模式 (Singleton)
- `TcpClient`: 确保全局唯一的网络连接
- `UserSession`: 管理全局用户会话状态

#### 2. 工厂模式 (Factory)  
- 各个 Client 模块的创建和管理
- 不同类型用户界面的动态创建

#### 3. 观察者模式 (Observer)
- Qt 信号槽机制实现模块间通信
- 状态变化的通知机制

#### 4. 策略模式 (Strategy)
- 不同用户角色的权限控制策略
- 数据验证和处理策略

### 📊 技术指标

#### 性能要求
- 响应时间: < 500ms (局域网)
- 并发用户: 100+ 
- 数据库连接池: 20 连接
- 内存占用: < 100MB (客户端)

#### 安全要求
- 密码加密存储
- 会话超时管理  
- SQL 注入防护
- 输入数据验证

#### 可用性要求
- 7×24 小时运行
- 自动故障恢复
- 数据定期备份
- 日志记录完整

### 🔧 扩展性设计

#### 模块化扩展
- 新增业务模块无需修改核心代码
- 插件式架构支持第三方扩展
- API 接口标准化

#### 数据库扩展
- 支持分库分表
- 读写分离支持
- 缓存机制集成

#### 部署扩展
- 支持容器化部署
- 微服务架构迁移准备
- 负载均衡支持